<!-- <app-navigation parentName='category-course' (tempChange)='changeTemplate($event)' (catChange)='changeCategory($event)'>
</app-navigation> -->
<!-- <app-search></app-search> -->
<!-- <ngx-ui-loader></ngx-ui-loader> -->
<div [ngClass]="langStyle">
  <ngx-ui-loader class="wrapper-app-video" *ngIf="!mainCategory.id"></ngx-ui-loader>
  <div class="wrapper-category-courses-inner">
    <div style="position: relative">
      <!-- <ngx-ui-loader [loaderId]="'loader-01'"></ngx-ui-loader> -->
    </div>
    <div *ngIf="mainCategory.id" class="row">
      <div class="col-md-12">
        <div class="wrap-template-video">
          <div class="templage-video-inner">
            <vg-player (onPlayerReady)="onPlayerReady($event,'video_app')">
              <vg-overlay-play vgFor="masterVideo" class="video-big-play-icon"></vg-overlay-play>
              <vg-controls>
                <vg-play-pause></vg-play-pause>
                <vg-scrub-bar>
                  <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
                  <vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>
                </vg-scrub-bar>
                <vg-time-display vgProperty="left" vgFormat="mm:ss"></vg-time-display>
                <vg-mute></vg-mute>
                <vg-fullscreen></vg-fullscreen>
              </vg-controls>
              <video [vgMedia]="master" #master autoplay="true" id="masterVideo" preload="auto"
                [src]="app_ser.video_url(mainCategory.video, mainCategory.video_derivation,'q_720')">
              </video>
              <!-- <video *ngIf="!mainCategory" [vgMedia]="master" #master
                autoplay="true" id="masterVideo" preload="auto"
                [src]="app_ser.video_url(templateCategoryCourses.app_video, templateCategoryCourses.video_derivation,'q_720')">
              </video> -->
            </vg-player>
            <span
              class="template-name-bigger-text">{{ app_ser.stringLang(mainCategory.name,mainCategory.name_en) }}</span>
          </div>
        </div>
      </div>
    </div>
    <div class="wrapper-courses-rounded-background">
      <div class="container container-custom-width">
        <div class="row">
          <div class="col-md-12">
            <div class="wrapper-courses"
              *ngFor="let subCategory of mainCategory.sub_categories ; let slidIndex = index">
              <div class="container-all-courses">
                <div class="row">
                  <div class="col-md-12 mb-4">
                    <h1 (click)="categoryNavigation(subCategory)" class="custom-category-title"
                      [style.color]="mainCategory?mainCategory.color:'#00b5a9'">
                      <i class="icon-genrl fal" [ngClass]="subCategory.fa_icon"></i>
                      {{ app_ser.stringLang(subCategory.name,subCategory.name_en) }}</h1>
                    <mdb-carousel [isControls]="true" class="carousel-multi-item multi-animation carousel-courses"
                      [ngClass]="mainCategory?mainCategory.css_class:'All'" [type]="'carousel-multi-item'"
                      [animation]="'slide'" [interval]="'1000000'">
                      <mdb-carousel-item *ngFor="let item of subCategory.slide_courses " class="carousel-item-custom">
                        <div class="row ml-0 mr-0">
                          <div class="col-md-2 custom-col-padding" *ngFor="let course of item ; let cardIndex = index ">
                            <mdb-card class="my-1 card-main" [ngClass]="getCoursePopupClass(cardIndex)">
                              <div class="wrapper-inner-course" (mouseenter)="showVideoOnOver(course.id,slidIndex)"
                                (mouseleave)="hideVideoOnOver()">
                                <a routerLink="/course-view/{{course.code}}/{{app_ser.urlString(course.name)}}">
                                  <div class="main-div-course">
                                    <img [src]="app_ser.img_url(course.cover_image,'course')"
                                      class="img-fluid course-img" alt="">
                                    <div class="overlay-dark-background"></div>
                                    <div class="overlay-course">
                                      <h3 class="course-title bold-hdng">{{course.name}}</h3>
                                      <p class="price">
                                        <span *ngIf="!course.price" class="current-discounted-price"
                                          [style.color]="mainCategory?mainCategory.color:'#ffffff'">{{'Free' | translate}}</span>
                                        <span *ngIf="course.price" class="current-discounted-price"
                                          [style.color]="mainCategory?mainCategory.color:'#ffffff'">${{course.price}}</span>
                                        <span *ngIf="course.old_price" class="old-price">${{course.old_price}}</span>
                                      </p>
                                    </div>
                                  </div>
                                  <div class="wrapper-hover-course-video"
                                    *ngIf="playVideoOnHover == course.id && slidIndex==playSlideOnHover">
                                    <div class="wrap-course-over-vg-player">
                                      <vg-player (onPlayerReady)="onPlayerReady($event,'courses',course)">
                                        <video *ngIf="api" [vgMedia]="master" #master id="masterVideo" preload="auto"
                                          autoplay="true" [src]="app_ser.video_url(course.video)">
                                        </video>
                                      </vg-player>
                                    </div>
                                  </div>
                                  <div class="overlay-course-summary-hover">
                                    <div class="box-play-icon">
                                      <a routerLink="/course-view/{{course.code}}/{{app_ser.urlString(course.name)}}"><i
                                          class="fal fa-play"></i></a>
                                    </div>
                                    <h3 class="course-title bold-hdng">{{course.name}}</h3>
                                    <div class="summary-course">
                                      <span class="course-date"><i
                                          class="fal fa-calendar-alt"></i>{{'courseDate' | translate }}
                                        {{course.create_date |  date:'MM/dd/yyyy'}}</span>
                                      <span class="no-of-lessons"><i
                                          class="fal fa-book"></i>{{'noOfLessons' | translate }}
                                        {{course.items_count}}</span>
                                      <br>
                                      <span class="course-time"><i
                                          class="fal fa-clock"></i>{{'courseDuration' | translate }}
                                        {{app_ser.formatTime(course.duration).hours}} {{'hour' | translate}}
                                        {{app_ser.formatTime(course.duration).minutes}} {{'Minutes' | translate}}
                                      </span>
                                      <span class="registered-students"><i
                                          class="fal fa-users"></i>{{'noOfStudents' | translate }}
                                        {{course.students_count}}</span> <br>
                                      <span class="trainer-name"><i
                                          class="fal fa-chalkboard-teacher"></i>{{'courseTrainer' | translate }}
                                        {{course.trainer_name?course.trainer_name:"أكاديمية فوكس" }}</span>
                                    </div>
                                  </div>
                                </a>
                                <div class="wrapper-icons-links">
                                  <div class="box-social-icon"
                                    [style.border-color]="mainCategory?mainCategory.color:'#ffffff'">
                                    <a *ngIf="api" (click)="muteAndPlay(course)">
                                      <i *ngIf="course.volume" class="fal fa-volume"
                                        [style.color]="mainCategory?mainCategory.color:'#ffffff'"></i>
                                      <i *ngIf="! course.volume" class="fal fa-volume-mute"
                                        [style.color]="mainCategory?mainCategory.color:'#00b5a9'"></i>
                                    </a>
                                  </div>
                                  <div class="box-social-icon"
                                    [style.border-color]="mainCategory?mainCategory.color:'#ffffff'">
                                    <a (click)="setFavourite(course)">
                                      <i class="fal fa-heart" *ngIf="!course.is_interested"
                                        [style.color]="mainCategory?mainCategory.color:'#ffffff'"></i>
                                      <i class="fal fa-heart" *ngIf="course.is_interested"
                                        style="color: red; font-weight: 1000"></i>
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </mdb-card>
                          </div>
                        </div>
                      </mdb-carousel-item>
                    </mdb-carousel>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
